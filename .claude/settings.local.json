{
  "permissions": {
    "allow": [
      "Bash(docker-compose ps:*)",
      "Bash(psql \"postgresql://scan:DuL7tZ6yKKbRmP*BWkc*JgtQi_.siE.iKiK2qskATMpKuFjAoNJhWvsCf*@police-scanner.cilycke4i4nz.us-east-1.rds.amazonaws.com:5432/scanner\" -f db/init.sql)",
      "Bash(bash:*)",
      "Bash(ssh:*)",
      "Bash(scp:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(timeout 10 ssh:*)",
      "Bash(apt-get update:*)",
      "Bash(apt-get install:*)",
      "Bash(python3:*)",
      "Bash(powershell -Command \"\n$cred = New-Object System.Management.Automation.PSCredential(''mfly'', (ConvertTo-SecureString ''B0nghit3'' -AsPlainText -Force))\n$session = New-PSSession -HostName 192.168.1.120 -UserName mfly -Credential $cred -SSHTransport\nInvoke-Command -Session $session -ScriptBlock { bash /tmp/verify_live_api_deployment.sh }\nRemove-PSSession $session\n\")",
      "Bash(export SSHPASS=\"B0nghit3\")",
      "Bash(sshpass:*)",
      "Bash(find:*)",
      "Bash(wc:*)",
      "Bash(cat:*)",
      "Bash(grep:*)",
      "Bash(docker-compose config:*)",
      "Bash(git -C \"p:/Git/police_scanner\" log --all --oneline --decorate -10)",
      "Bash(git -C \"p:/Git/police_scanner\" diff --name-only main Fly-DB-Branch)",
      "Bash(pwsh:*)",
      "Bash(psql:*)",
      "Bash(python:*)",
      "Bash(timeout 300 python:*)",
      "Bash(git rev-list:*)",
      "Bash(docker compose logs:*)",
      "Bash(docker compose:*)",
      "Bash(curl:*)",
      "Bash(docker stats:*)",
      "Bash(docker inspect:*)",
      "Bash(docker logs:*)",
      "Bash(awk:*)",
      "Bash(git config:*)",
      "Bash(ls:*)",
      "Bash(docker exec:*)",
      "Bash(docker cp:*)",
      "Bash(python -m py_compile:*)",
      "Bash(pkill -f \"docker compose logs\")",
      "Bash(docker ps:*)",
      "Bash(docker volume:*)",
      "Bash(aws s3 ls:*)",
      "Bash(git rebase:*)",
      "Bash(tree:*)",
      "Bash(ffmpeg:*)",
      "Bash(docker system prune:*)",
      "Bash(docker image prune:*)",
      "Bash(docker run --rm -v /opt/policescanner/db/migrations:/migrations postgres:15-alpine psql \"postgresql://scan:DuL7tZ6yKKbRmP*BWkc*JgtQi_.siE.iKiK2qskATMpKuFjAoNJhWvsCf*@police-scanner.cilycke4i4nz.us-east-1.rds.amazonaws.com:5432/scanner\" -f /migrations/006_transcription_improvements.sql)",
      "Bash(git -C /opt/policescanner status --short)",
      "Bash(git -C /opt/policescanner log --oneline -3)",
      "Bash(git -C /opt/policescanner add )",
      "Bash(app_transcribe/worker.py )",
      "Bash(app_transcribe/requirements.txt )",
      "Bash(app_scheduler/transcription_dispatcher.py )",
      "Bash(app_scheduler/scheduler.py )",
      "Bash(app_scheduler/requirements.txt )",
      "Bash(db/migrations/006_transcription_improvements.sql)",
      "Bash(git -C /opt/policescanner commit -m \"$(cat <<''EOF''\nfeat: implement OpenAI Whisper API transcription pipeline\n\nComplete refactor of app_transcribe to enable automatic transcription:\n\n- Rewrite worker.py to use OpenAI Whisper API (cloud) instead of local model\n- Create transcription_dispatcher.py to queue Celery tasks for pending calls\n- Add dispatcher job to scheduler.py (runs every 30s)\n- Add migration 006 for schema improvements (indexes, defaults)\n- Update requirements.txt with openai SDK and celery dependencies\n\nKey features:\n- Queries bcfy_calls_raw for calls with processed=TRUE and no transcript\n- Downloads WAV from S3 (supports hierarchical and legacy paths)\n- Sends audio to OpenAI whisper-1 model with verbose_json response\n- Inserts ALL required columns into transcripts table\n- Updates processing_state through pipeline stages\n- Idempotent - skips already transcribed calls\n- Automatic retry with exponential backoff\n\nRequires OPENAI_API_KEY environment variable to be set.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C /opt/policescanner push origin Fly-DB-Branch)",
      "Bash(export PGPASSWORD:*)",
      "Bash(PGPASSWORD='DuL7tZ6yKKbRmP*BWkc*JgtQi_.siE.iKiK2qskATMpKuFjAoNJhWvsCf*' psql:*)"
    ],
    "deny": [],
    "ask": []
  }
}
